<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Master Your Knowledge</title>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f6f9;
    text-align: center;
    padding: 20px;
}

.container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 5px 15px rgba(0,0,0,0.1);
}

textarea {
    width: 100%;
    height: 150px;
    margin-top: 10px;
    padding: 10px;
}

button {
    margin: 10px;
    padding: 10px 20px;
    border: none;
    background-color: #4a6cf7;
    color: white;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #334fd1;
}

.card {
    margin-top: 20px;
    padding: 20px;
    border: 2px solid #4a6cf7;
    border-radius: 10px;
    min-height: 100px;
    font-size: 18px;
}

.hidden {
    display: none;
}

.navigation {
    margin-top: 20px;
}
</style>
</head>
<body>

<div class="container">

<h1>Master Your Knowledge</h1>

<!-- CREATE SECTION -->
<div id="createSection">

<h2>Eigenen Stoff eingeben</h2>
<textarea id="inputText" placeholder="Füge hier deinen Lernstoff ein..."></textarea>
<br>
<button onclick="generateCards()">Karteikarten erstellen</button>

</div>

<!-- PRACTICE SECTION -->
<div id="practiceSection" class="hidden">

<h2>Übungsmodus</h2>

<div class="card" id="cardFront"></div>
<div class="card hidden" id="cardBack"></div>

<button onclick="flipCard()">Rückseite anzeigen</button>

<div class="navigation">
<button onclick="prevCard()">Vorherige</button>
<button onclick="nextCard()">Nächste</button>
</div>

<hr>

<button onclick="startSpeech()">Sprechen</button>
<button onclick="evaluateSpeech()">Bewerten</button>

<p id="feedback"></p>

<br>
<button onclick="backToCreate()">Neue Karten erstellen</button>

</div>

</div>

<script>

let cards = [];
let currentCard = 0;
let spokenText = "";

// Karteikarten generieren (einfache Demo-Logik)
function generateCards() {

    const text = document.getElementById("inputText").value;
    if (!text) return alert("Bitte Lernstoff eingeben!");

    // Einfache Trennung nach Punkten
    const sentences = text.split(".");
    cards = [];

    sentences.forEach(sentence => {
        if (sentence.trim().length > 10) {
            cards.push({
                question: "Erkläre: " + sentence.trim(),
                answer: sentence.trim()
            });
        }
    });

    if (cards.length === 0) {
        alert("Nicht genug Inhalt für Karten.");
        return;
    }

    currentCard = 0;
    document.getElementById("createSection").classList.add("hidden");
    document.getElementById("practiceSection").classList.remove("hidden");

    showCard();
}

function showCard() {
    document.getElementById("cardFront").innerText = cards[currentCard].question;
    document.getElementById("cardBack").innerText = cards[currentCard].answer;

    document.getElementById("cardBack").classList.add("hidden");
    document.getElementById("feedback").innerText = "";
}

function flipCard() {
    document.getElementById("cardBack").classList.toggle("hidden");
}

function nextCard() {
    if (currentCard < cards.length - 1) {
        currentCard++;
        showCard();
    }
}

function prevCard() {
    if (currentCard > 0) {
        currentCard--;
        showCard();
    }
}

function backToCreate() {
    document.getElementById("practiceSection").classList.add("hidden");
    document.getElementById("createSection").classList.remove("hidden");
    document.getElementById("inputText").value = "";
}

// Sprachfunktion
function startSpeech() {

    if (!('webkitSpeechRecognition' in window)) {
        alert("Browser unterstützt keine Sprachaufnahme.");
        return;
    }

    const recognition = new webkitSpeechRecognition();
    recognition.lang = "de-DE";

    recognition.onresult = function(event) {
        spokenText = event.results[0][0].transcript;
        alert("Erkannt: " + spokenText);
    };

    recognition.start();
}

// Einfache Bewertungslogik
function evaluateSpeech() {

    if (!spokenText) {
        alert("Bitte erst sprechen!");
        return;
    }

    const correctAnswer = cards[currentCard].answer.toLowerCase();
    const userAnswer = spokenText.toLowerCase();

    if (userAnswer.includes(correctAnswer.substring(0, 15))) {
        document.getElementById("feedback").innerText = "Sehr gut! Inhalt stimmt größtenteils.";
    } else {
        document.getElementById("feedback").innerText = "Noch nicht ganz richtig. Versuch es nochmal.";
    }

    spokenText = "";
}

</script>

</body>
</html>

